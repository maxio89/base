<!DOCTYPE html>
<html>
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html" xmlns:rich="http://richfaces.org/rich"
                xmlns:f="http://java.sun.com/jsf/core" xmlns:cu="http://java.sun.com/jsf/composite/components" template="/layout/template.xhtml">

    <ui:define name="body">
        <div class="prefix_7 grid_10 suffix_7">
            <rich:panel rendered="#{not identity.loggedIn}">
                <f:facet name="header">#{messages['view.register.registerHeader']}</f:facet>
                <h:form id="rF">
                    <!--<focus:focus/>-->
                    <rich:message for="pM"/>
                    <rich:graphValidator id="pM" value="#{registerView.passwordBean}"/>
                    <cu:edit id="email" label="#{domain['User.email']}">
                        <h:inputText id="i" value="#{registerView.user.email}" required="true">
                            <f:validator validatorId="uniqueEmailValidator"/>
                            <rich:validator/>
                        </h:inputText>
                    </cu:edit>
                    <cu:edit id="firstName" label="#{domain['User.firstName']}">
                        <h:inputText id="i" value="#{registerView.user.firstName}" required="true">
                            <rich:validator/>
                        </h:inputText>
                    </cu:edit>
                    <cu:edit id="lastName" label="#{domain['User.lastName']}">
                        <h:inputText id="i" value="#{registerView.user.lastName}" required="true">
                            <rich:validator/>
                        </h:inputText>
                    </cu:edit>
                    <cu:edit id="password" label="#{domain['User.passwordDigest']}">
                        <h:inputSecret id="i" value="#{registerView.passwordBean.password}" required="true">
                            <rich:validator/>
                        </h:inputSecret>
                    </cu:edit>
                    <cu:edit id="passwordConfirmation" label="#{messages['view.register.passwordConfirmation']}">
                        <h:inputSecret id="i" value="#{registerView.passwordBean.passwordConfirmation}" required="true">
                            <rich:validator/>
                        </h:inputSecret>
                    </cu:edit>
                    <h:commandButton id="r" value="#{messages['view.register.registerButton']}" action="#{registerView.register}"/>
                </h:form>
            </rich:panel>
            <h:panelGroup rendered="#{identity.loggedIn}">
                <h1>#{messages['view.register.mayNotBeLoggedIn']}</h1>
            </h:panelGroup>
        </div>
    </ui:define>
</ui:composition>
</html>
